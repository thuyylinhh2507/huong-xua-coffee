<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đặt Hàng - Con Pò Cười</title>
    <link rel="stylesheet" href="index.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Style bổ sung cho trang order, sử dụng màu cũ */
        .product-detail {
            display: flex;
            gap: 2rem;
            margin-bottom: 3rem;
            background: var(--cream);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .product-image img {
            width: 300px;
            height: 300px;
            object-fit: cover;
            border-radius: 15px;
        }
        .product-info {
            flex: 1;
        }
        .product-info h2 {
            color: var(--primary-brown);
            margin-bottom: 1rem;
        }
        .product-price {
            font-size: 1.8rem;
            color: var(--golden);
            font-weight: 700;
            margin: 1rem 0;
        }
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .quantity-selector button {
            padding: 0.5rem 1rem;
            background: var(--light-brown);
            border: none;
            color: var(--white);
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 5px;
        }
        .quantity-selector span {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-brown);
        }
        .add-to-cart {
            background: var(--primary-brown);
            color: var(--white);
            padding: 1rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
        }
        .cart-summary {
            background: var(--cream);
            padding: 2rem;
            border-radius: 15px;
            margin-top: 3rem;
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--light-brown);
            padding-bottom: 1rem;
        }
        .total-price {
            text-align: right;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--golden);
            margin-top: 1rem;
        }
        @media (max-width: 768px) {
            .product-detail {
                flex-direction: column;
            }
            .product-image img {
                width: 100%;
                height: auto;
            }
        }
    </style>
</head>
<body>

    <!-- Header (giống main.html) -->
    <header class="header">
        <div class="container">
            <div class="nav-brand">
                <span class="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-cup-hot" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M.5 6a.5.5 0 0 0-.488.608l1.652 7.434A2.5 2.5 0 0 0 4.104 16h5.792a2.5 2.5 0 0 0 2.44-1.958l.131-.59a3 3 0 0 0 1.3-5.854l.221-.99A.5.5 0 0 0 13.5 6zM13 12.5a2 2 0 0 1-.316-.025l.867-3.898A2.001 2.001 0 0 1 13 12.5M2.64 13.825 1.123 7h11.754l-1.517 6.825A1.5 1.5 0 0 1 9.896 15H4.104a1.5 1.5 0 0 1-1.464-1.175"/>
                        <path d="m4.4 .8-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 3.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 3.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 3 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 4.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 6.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 6.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 6 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 7.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.252.382l-.019.025-.005.008-.002.002A.5.5 0 0 1 9.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 9.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 9 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 10.4.8"/>
                    </svg>
                </span>
                <h1>Con Pò Cười</h1>
            </div>
            <nav class="nav">
                <a href="main.html#home">Trang chủ</a>
                <a href="main.html#about">Giới thiệu</a>
                <a href="main.html#menu">Menu</a>
                <a href="main.html#booking">Đặt bàn</a>
                <a href="main.html#contact">Liên hệ</a>
            </nav>
            <div class="nav-contact">
                <span><i class="fa-solid fa-phone-volume"></i> 0123 456 789</span>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">☰</button>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <a href="main.html#home" onclick="closeMobileMenu()">Trang chủ</a>
        <a href="main.html#about" onclick="closeMobileMenu()">Giới thiệu</a>
        <a href="main.html#menu" onclick="closeMobileMenu()">Menu</a>
        <a href="main.html#booking" onclick="closeMobileMenu()">Đặt bàn</a>
        <a href="main.html#contact" onclick="closeMobileMenu()">Liên hệ</a>
    </div>

    <!-- Nội dung trang Order -->
    <section class="order-section" style="padding: 100px 0;">
        <div class="container">
            <div class="section-header">
                <h2>Chi Tiết Sản Phẩm & Giỏ Hàng</h2>
                <p>Chọn số lượng và thêm vào giỏ hàng để đặt hàng</p>
            </div>

            <!-- Phần hiển thị chi tiết sản phẩm (ban đầu ẩn, JS sẽ fill khi click từ menu) -->
            <div class="product-detail" id="productDetail" style="display: none;">
                <div class="product-image">
                    <img id="productImg" src="" alt="Sản phẩm">
                </div>
                <div class="product-info">
                    <h2 id="productName"></h2>
                    <p id="productDesc"></p>
                    <p class="product-price" id="productPrice">0đ</p>
                    <div class="quantity-selector">
                        <button onclick="changeQuantity(-1)">-</button>
                        <span id="quantity">1</span>
                        <button onclick="changeQuantity(1)">+</button>
                    </div>
                    <button class="add-to-cart btn btn-primary" onclick="addToCartFromDetail()">Thêm Vào Giỏ Hàng</button>
                </div>
            </div>

            <!-- Tóm tắt giỏ hàng -->
            <div class="cart-summary">
                <h3>Giỏ Hàng Của Bạn</h3>
                <div id="cartList"></div>
                <p class="total-price">Tổng Tiền: <span id="totalCartPrice">0đ</span></p>
                <button class="btn btn-primary btn-large" onclick="checkoutCart()">Đặt Hàng Ngay</button>
            </div>
        </div>
    </section>

    <!-- Footer (giống main.html) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <span class="logo"></span>
                        <h3>Con Pò Cười</h3>
                    </div>
                    <p>Con Pò Cười là điểm đến lý tưởng dành cho những ai muốn tìm lại hương vị truyền thống trong không gian ấm cúng.</p>
                    <div class="social-buttons">
                        <a href="#" class="social-btn facebook"><i class="fa-brands fa-facebook"></i> Facebook</a>
                        <a href="#" class="social-btn instagram"><i class="fa-brands fa-instagram"></i> Instagram</a>
                    </div>
                </div>
                <div class="footer-contact">
                    <h4>Liên hệ</h4>
                    <div class="footer-contact-item">
                        <span class="icon"><i class="fa-solid fa-location-dot"></i></span>
                        <span>123 Nguyễn Huệ, Q1, TP.HCM</span>
                    </div>
                    <div class="footer-contact-item">
                        <span class="icon"><i class="fa-solid fa-phone-volume"></i></span>
                        <span>0123 456 789</span>
                    </div>
                    <div class="footer-contact-item">
                        <span class="icon"><i class="fa-solid fa-envelope"></i></span>
                        <span>info@huongxua.com</span>
                    </div>
                    <div class="footer-hours">
                        <h5>Giờ mở cửa</h5>
                        <p>7:00 - 22:00<br>(Hàng ngày)</p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 Con Pò Cười Coffee. Tất cả quyền được bảo lưu.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        let currentProduct = null;
        let quantity = 1;
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Hiển thị chi tiết sản phẩm khi click từ menu (giả sử dùng URL param từ main.html)
        window.addEventListener('load', () => {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            if (id) {
                // Lấy thông tin sản phẩm từ data (giả sử lấy từ main.html, ở đây dùng example)
                // Trong thực tế, dùng fetch hoặc data hardcode
                const products = { // Example data, thay bằng data thực từ menu
                    'cf-den': { name: 'Cà Phê Đen Đá', price: 25000, img: 'img/Ca-phe-den.jpeg', desc: 'Cà phê phin truyền thống' },
                    // Thêm các sản phẩm khác tương tự
                };
                currentProduct = products[id] || null;
                if (currentProduct) {
                    document.getElementById('productDetail').style.display = 'flex';
                    document.getElementById('productName').textContent = currentProduct.name;
                    document.getElementById('productDesc').textContent = currentProduct.desc || '';
                    document.getElementById('productImg').src = currentProduct.img;
                    updateProductPrice();
                }
            }
            renderCart();
        });

        function changeQuantity(delta) {
            quantity = Math.max(1, quantity + delta);
            document.getElementById('quantity').textContent = quantity;
            updateProductPrice();
        }

        function updateProductPrice() {
            const total = currentProduct.price * quantity;
            document.getElementById('productPrice').textContent = total.toLocaleString('vi-VN') + 'đ';
        }

        function addToCartFromDetail() {
            if (!currentProduct) return;
            const existing = cart.find(item => item.id === currentProduct.id);
            if (existing) {
                existing.quantity += quantity;
            } else {
                cart.push({ ...currentProduct, id: currentProduct.id || 'unknown', quantity });
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            alert('Đã thêm vào giỏ hàng!');
            renderCart();
        }

        function renderCart() {
            const cartList = document.getElementById('cartList');
            cartList.innerHTML = '';
            let total = 0;
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                const div = document.createElement('div');
                div.className = 'cart-item';
                div.innerHTML = `
                    <span>${item.name} x ${item.quantity}</span>
                    <span>${itemTotal.toLocaleString('vi-VN')}đ</span>
                    <button onclick="removeFromCart(${index})" style="background: none; border: none; color: red; cursor: pointer;">X</button>
                `;
                cartList.appendChild(div);
            });
            document.getElementById('totalCartPrice').textContent = total.toLocaleString('vi-VN') + 'đ';
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
        }

        function checkoutCart() {
            if (cart.length === 0) {
                alert('Giỏ hàng trống!');
                return;
            }
            alert('Cảm ơn! Vui lòng liên hệ Zalo/SDT để xác nhận đơn hàng.');
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
        }
    </script>
</body>
</html>